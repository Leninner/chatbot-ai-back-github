- [Chatbot AI](#chatbot-ai)
  - [Requirements](#requirements)
  - [Initial setup](#initial-setup)
  - [Deploy the application](#deploy-the-application)
  - [Start the local api](#start-the-local-api)
  - [Fetch, tail, and filter Lambda function logs](#fetch-tail-and-filter-lambda-function-logs)
  - [Cleanup](#cleanup)


# Chatbot AI

- typescript - Functions typed in TypeScript that you can use to build your serverless application.
- python - Functions typed in Python that you can use to build your serverless application.
- events - Invocation events that you can use to invoke the functions.
- template.yaml - A template that defines the application's AWS resources.

## Requirements

- docker
- SAM CLI
- AWS CLI

To setup a profile for the SAM CLI, you can run the following in your shell:

```bash
aws configure --profile tinkin-dev
```

## Initial setup

To setup the initial setup, run the following in your shell:

```bash
# Run the initial_setup.sh
sh initial_setup.sh
```

## Deploy the application

To build and deploy your application for the first time, run the following in your shell:

```bash
# Run the deploy.sh
sh deploy.sh {{aws_profile_name}}
```

## Start the local api

Update the variables envs

```json
// sam_local_envs_parameters.json
{
  "Parameters": {
      "OPENAI_API_KEY": "xxxxxxxx", // your openai api key
      "POSTGRES_CONNECTION_STRING": "postgresql://admin:admin@172.25.0.2:5432/conversations-dev" // postgres connection string
  }
}
```

Initiate the local api

```bash
sh start_local_api.sh
```

## Fetch, tail, and filter Lambda function logs

To simplify troubleshooting, SAM CLI has a command called `sam logs`. `sam logs` lets you fetch logs generated by your deployed Lambda function from the command line. In addition to printing the logs on the terminal, this command has several nifty features to help you quickly find the bug.

`NOTE`: This command works for all AWS Lambda functions; not just the ones you deploy using SAM.

```bash
chatbot-ai$ sam logs -n HelloWorldFunction --stack-name chatbot-ai --tail
```

You can find more information and examples about filtering Lambda function logs in the [SAM CLI Documentation](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-logging.html).
## Cleanup

To delete the sample application that you created, use the AWS CLI. Assuming you used your project name for the stack name, you can run the following:

```bash
aws cloudformation delete-stack --stack-name chatbot-ai
```